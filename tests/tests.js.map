{"version":3,"sources":["tests.js"],"names":["exports","defineAutoTests","describe","it","expect","window","Branch","toBeDefined","getLatestReferringParams","toBe","getFirstReferringParams","setIdentity","logout","createBranchUniversalObject","userCompletedAction","loadRewards","redeemRewards","creditHistory","beforeEach","done","initSession","then","res","branchUniversalObj","properties","canonicalIdentifier","title","contentDescription","contentImageUrl","contentIndexingMode","contentMetadata","registerView","feature","alias","channel","stage","duration","controlParams","$fallback_url","$desktop_url","$android_url","$ios_url","$ipad_url","$fire_url","$blackberry_url","$windows_phone_url","generateShortUrl","err"],"mappings":"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","file":"tests.js","sourcesContent":["/**\n * Branch.IO Cordova Plugin Unit-Test\n * ----------------------------------\n */\n/* jshint jasmine: true */\n\nexports.defineAutoTests = function() {\n\n\tdescribe('Branch.IO SDK (Branch)', function() {\n\t\tit('should exist', function() {\n\t\t\texpect(window.Branch).toBeDefined();\n\t\t});\n\t\tit('should contain a method called getLatestReferringParams()', function() {\n\t\t\texpect(window.Branch.getLatestReferringParams).toBeDefined();\n\t\t\texpect(typeof(window.Branch.getLatestReferringParams)).toBe('function');\n\t\t});\n\t\tit('should contain a method called getFirstReferringParams()', function() {\n\t\t\texpect(window.Branch.getFirstReferringParams).toBeDefined();\n\t\t\texpect(typeof(window.Branch.getFirstReferringParams)).toBe('function');\n\t\t});\n\t\tit('should contain a method called setIdentity()', function() {\n\t\t\texpect(window.Branch.setIdentity).toBeDefined();\n\t\t\texpect(typeof(window.Branch.setIdentity)).toBe('function');\n\t\t});\n\t\tit('should contain a method called logout()', function() {\n\t\t\texpect(window.Branch.logout).toBeDefined();\n\t\t\texpect(typeof(window.Branch.logout)).toBe('function');\n\t\t});\n\t\tit('should contain a method called createBranchUniversalObject()', function() {\n\t\t\texpect(window.Branch.createBranchUniversalObject).toBeDefined();\n\t\t\texpect(typeof(window.Branch.createBranchUniversalObject)).toBe('function');\n\t\t});\n\t\tit('should contain a method called userCompletedAction()', function() {\n\t\t\texpect(window.Branch.userCompletedAction).toBeDefined();\n\t\t\texpect(typeof(window.Branch.userCompletedAction)).toBe('function');\n\t\t});\n\t\tit('should contain a method called loadRewards()', function() {\n\t\t\texpect(window.Branch.loadRewards).toBeDefined();\n\t\t\texpect(typeof(window.Branch.loadRewards)).toBe('function');\n\t\t});\n\t\tit('should contain a method called redeemRewards()', function() {\n\t\t\texpect(window.Branch.redeemRewards).toBeDefined();\n\t\t\texpect(typeof(window.Branch.redeemRewards)).toBe('function');\n\t\t});\n\t\tit('should contain a method called creditHistory()', function() {\n\t\t\texpect(window.Branch.creditHistory).toBeDefined();\n\t\t\texpect(typeof(window.Branch.creditHistory)).toBe('function');\n\t\t});\n\t});\n\n\tdescribe('Branch.getLatestReferringParams()', function() {\n\t\tbeforeEach(function(done) {\n\t\t\twindow.Branch.initSession().then(function() {\n\t\t\t\tdone();\n\t\t\t});\n\t\t}, 3000);\n\t\tit('should return an object response', function(done) {\n\t\t\twindow.Branch.getLatestReferringParams().then(function(res) {\n\t\t\t\texpect(typeof(res)).toBe('object');\n\t\t\t\tdone();\n\t\t\t});\n\t\t}, 10000);\n\t});\n\n\tdescribe('Branch.getFirstReferringParams()', function() {\n\t\tbeforeEach(function(done) {\n\t\t\twindow.Branch.initSession().then(function() {\n\t\t\t\tdone();\n\t\t\t});\n\t\t}, 3000);\n\t\tit('should return an object response', function(done) {\n\t\t\twindow.Branch.getFirstReferringParams().then(function(res) {\n\t\t\t\t// We expect false since we won't open this from a branch link\n\t\t\t\texpect(res).toBe(false);\n\t\t\t\tdone();\n\t\t\t});\n\t\t}, 10000);\n\t});\n\n\n\tdescribe('Branch.setIdentity()', function() {\n\t\tbeforeEach(function(done) {\n\t\t\twindow.Branch.initSession().then(function() {\n\t\t\t\tdone();\n\t\t\t});\n\t\t}, 3000);\n\t\tit('should return \"Success\" response', function(done) {\n\t\t\twindow.Branch.setIdentity('new_identity').then(function(res) {\n\t\t\t\texpect(typeof(res)).toBe('object');\n\t\t\t\tdone();\n\t\t\t});\n\t\t}, 10000);\n\t});\n\n\tdescribe('Branch.createBranchUniversalObject()', function() {\n\t\tvar branchUniversalObj;\n\n\t\tbeforeEach(function(done) {\n\t\t\twindow.Branch.initSession().then(function() {\n\t\t\t    var properties = {\n\t\t\t        canonicalIdentifier: 'testbed',\n\t\t\t        title: 'testbed',\n\t\t\t        contentDescription: 'Testbed Application',\n\t\t\t        contentImageUrl: 'https://imgflip.com/s/meme/Derp.jpg',\n\t\t\t        contentIndexingMode: 'public',\n\t\t\t        contentMetadata: {}\n\t\t\t    };\n\t\t\t\twindow.Branch.createBranchUniversalObject(properties).then(function(res) {\n\t\t\t\t\tbranchUniversalObj = res;\n\t\t\t\t\tdone();\n\t\t\t\t});\n\t\t\t});\n\t\t}, 3000);\n\t\tit('should execute register view', function(done) {\n\t\t\tbranchUniversalObj.registerView().then(function(res) {\n\t\t\t\texpect(typeof(res)).toBe('object');\n\t\t\t\tdone();\n\t\t\t});\n\t\t}, 5000);\n\t\tit('should execute generate short url', function(done) {\n\t\t    var properties = {\n\t\t        feature: 'test',\n\t\t        alias: 'testbed',\n\t\t        channel: 'test',\n\t\t        stage: 'test',\n\t\t        duration: 10000\n\t\t    };\n\t\t    var controlParams = {\n\t\t        $fallback_url: 'www.another.com',\n\t\t        $desktop_url: 'www.desktop.com',\n\t\t        $android_url: 'test',\n\t\t        $ios_url: 'ios',\n\t\t        $ipad_url: 'ipad',\n\t\t        $fire_url: 'fire',\n\t\t        $blackberry_url: 'blackberry',\n\t\t        $windows_phone_url: 'win-phone'\n\t\t    };\n\t\t    branchUniversalObj.generateShortUrl(properties, controlParams).then(function(res) {\n\t\t        expect(typeof(res)).toBe('object');\n\t\t        done();\n\t\t    });\n\t\t}, 5000);\n\t});\n\n\tdescribe('Branch.userCompletedAction()', function() {\n\t\tbeforeEach(function(done) {\n\t\t\twindow.Branch.initSession().then(function() {\n\t\t\t\tdone();\n\t\t\t});\n\t\t}, 3000);\n\t\tit('should successfully execute the method', function(done) {\n\t\t\twindow.Branch.userCompletedAction('login');\n\t\t\texpect('Success').toBe('Success');\n\t\t\tdone();\n\t\t}, 10000);\n\t});\n\n\tdescribe('Branch.loadRewards()', function() {\n\t\tbeforeEach(function(done) {\n\t\t\twindow.Branch.initSession().then(function() {\n\t\t\t\tdone();\n\t\t\t});\n\t\t}, 3000);\n\t\tit('should return an object response', function(done) {\n\t\t\twindow.Branch.loadRewards().then(function(res) {\n\t\t\t\texpect(typeof(res)).toBe('number');\n\t\t\t\tdone();\n\t\t\t}, function(err) {\n\t\t\t\texpect(typeof(err)).toBe('string');\n\t\t\t\tdone();\n\t\t\t});\n\t\t}, 10000);\n\t});\n\n\tdescribe('Branch.redeemRewards()', function() {\n\t\tbeforeEach(function(done) {\n\t\t\twindow.Branch.initSession().then(function() {\n\t\t\t\tdone();\n\t\t\t});\n\t\t}, 3000);\n\t\tit('should return an object/string error response', function(done) {\n\t\t\twindow.Branch.redeemRewards(100).then(function(res) {\n\t\t\t\texpect(typeof(res)).toBe('object');\n\t\t\t\tdone();\n\t\t\t}, function(err) {\n\t\t\t\texpect(typeof(err)).toBe('string');\n\t\t\t\tdone();\n\t\t\t});\n\t\t}, 10000);\n\t});\n\n\tdescribe('Branch.creditHistory()', function() {\n\t\tbeforeEach(function(done) {\n\t\t\twindow.Branch.initSession().then(function() {\n\t\t\t\tdone();\n\t\t\t});\n\t\t}, 3000);\n\t\tit('should return the credit balance', function(done) {\n\t\t\twindow.Branch.creditHistory().then(function(res) {\n\t\t\t\texpect(typeof(res)).toBe('object');\n\t\t\t\tdone();\n\t\t\t});\n\t\t}, 10000);\n\t});\n\n};\n"],"sourceRoot":"/source/"}